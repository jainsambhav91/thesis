<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Residence Restrictions</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.mapbox.com/mapbox.js/v3.0.1/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v3.0.1/mapbox.css' rel='stylesheet' />
<script src='https://npmcdn.com/@turf/turf/turf.min.js'></script> 

<!-- DATA SOURCES --> 
<script type="text/javascript" src="schools.js"></script>
<script type="text/javascript" src="parks.js"></script>
<script type="text/javascript" src="totalArea.js"></script>
<script type="text/javascript" src="dissolved_check.js"></script>
<style>
  body { margin:0; padding:0; }
  #map { position:absolute; top:0; bottom:0; width:100%; height: 500px; }
  
</style>
</head>
<body>


<div id='map'></div>
<script>
        L.mapbox.accessToken = 'pk.eyJ1IjoiamFpbnNhbWJoYXYiLCJhIjoiY2l1aW5uOTZ5MDAwOTJvcGxrMWg4OHUxciJ9.X8mAbHJEKa78PHXfVRK5-Q';
        var map = L.mapbox.map('map', 'mapbox.streets')
                                .setView([40, -74.50], 9);
    
        // var marker = L.marker([40, -74.50]).addTo(map);
        
        // var circle = L.circle([51.508, -0.11], {
        //     color: 'red',
        //     fillColor: '#f03',
        //     fillOpacity: 0.5,
        //     radius: 500
        //     }).addTo(map);
        
        var totalAreaStyle = {
                // "radius": 8,
                "fillColor": "#000",
                "color": "#000",
                "weight": 1,
                "opacity": 0.3,
                "fillOpacity": 0.05
            };
            
        var schoolStyle = {
                // "radius": 8,
                "fillColor": "#1588c1",
                "color": "#1588c1",
                "weight": 1,
                "opacity": 0.8,
                "fillOpacity": 0.5
            };
        
        var parkStyle = {
                // "radius": 8,
                "fillColor": "#15c16b",
                "color": "#15c16b",
                "weight": 1,
                "opacity": 1,
                "fillOpacity": 1
            };    
        
        // L.geoJSON(geojsonFeature, {
        //       pointToLayer: function (feature, latlng) {
        //         return L.circleMarker(latlng, myStyle);
        //         }
        //         }).addTo(map);
            
        var schoolBuffer = turf.buffer(schools, 500, 'feet'); 
        var parksBuffer = turf.buffer(parks, 500, 'feet'); 
        // var parksCombined = turf.envelope(parksBuffer);
        // var parksCombined = turf.combine(parksBuffer)
        // var union = turf.union(schoolBuffer, parksBuffer);
        // var dissolved = turf.dissolve(parksBuffer, 'combine');
        // var dissolvedSchools = turf.dissolve(schoolBuffer, 'combine');
        // var union = turf.union(dissolved, dissolvedSchools);
        
        L.geoJSON(totalArea, { style: totalAreaStyle }).addTo(map);    
        L.geoJSON(schoolBuffer, { style: schoolStyle }).addTo(map);
        // L.geoJSON(parksBuffer, { style: schoolStyle }).addTo(map);
        // L.geoJSON(union, { style: parkStyle }).addTo(map);
        // L.geoJSON(schoolsDissolved, { style: parkStyle }).addTo(map);
        L.geoJSON(parksBuffer, { style: parkStyle }).addTo(map);
        
        
    
    
</script>


</body>
</html>
